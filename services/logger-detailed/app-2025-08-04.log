2025-08-04T23:24:27.822Z [INFO] [API][PUT-pengembalian] API request started
{
  "requestId": "req-1754349867822-473bicvg5",
  "timestamp": "2025-08-04T23:24:27.822Z",
  "userAgent": "PostmanRuntime/7.45.0",
  "contentLength": "264",
  "performance": {
    "timestamp": 1754349867822,
    "memory": {
      "rss": 1208520704,
      "heapTotal": 216461312,
      "heapUsed": 210883064,
      "external": 6111082,
      "arrayBuffers": 2120227
    }
  }
}
2025-08-04T23:24:27.828Z [INFO] [API][PUT-pengembalian] Rate limit check completed
{
  "performance": {
    "label": "rate-limit-check",
    "duration": "0ms"
  }
}
2025-08-04T23:24:28.540Z [INFO] [API][PUT-pengembalian] Authentication completed
{
  "performance": {
    "label": "authentication",
    "duration": "707ms"
  }
}
2025-08-04T23:24:28.543Z [INFO] [API][PUT-pengembalian] Parameter processing completed
{
  "performance": {
    "label": "parameter-processing",
    "duration": "0ms"
  }
}
2025-08-04T23:24:28.545Z [INFO] [API][PUT-pengembalian] Authentication and parameters processed
{
  "requestId": "req-1754349867822-473bicvg5",
  "userId": "user_2zqMR8BytXixaDKNlvkF8Hm7pOp",
  "transactionCode": "TXN-20250805-001",
  "authDuration": 707,
  "paramDuration": 0,
  "rateLimitDuration": 0,
  "performance": {
    "timestamp": 1754349868545,
    "memory": {
      "rss": 1205121024,
      "heapTotal": 218034176,
      "heapUsed": 210721624,
      "external": 6128132,
      "arrayBuffers": 2139916
    }
  }
}
2025-08-04T23:24:28.547Z [INFO] [API][PUT-pengembalian] URL parsing completed
{
  "performance": {
    "label": "url-parsing",
    "duration": "0ms"
  }
}
2025-08-04T23:24:28.549Z [INFO] [API][PUT-pengembalian] Parameter validation completed
{
  "performance": {
    "label": "parameter-validation",
    "duration": "0ms"
  }
}
2025-08-04T23:24:28.550Z [INFO] [API][PUT-pengembalian] Request body parsing completed
{
  "performance": {
    "label": "body-parsing",
    "duration": "0ms"
  }
}
2025-08-04T23:24:28.552Z [INFO] [API][PUT-pengembalian] Request body validation completed
{
  "performance": {
    "label": "body-validation",
    "duration": "0ms"
  }
}
2025-08-04T23:24:28.555Z [INFO] [API][PUT-pengembalian] Request validation completed
{
  "requestId": "req-1754349867822-473bicvg5",
  "paramType": "code",
  "includeDetails": false,
  "itemCount": 1,
  "urlParsingDuration": 0,
  "paramValidationDuration": 0,
  "bodyParsingDuration": 0,
  "validationDuration": 0,
  "performance": {
    "timestamp": 1754349868555,
    "memory": {
      "rss": 1205121024,
      "heapTotal": 218034176,
      "heapUsed": 210794784,
      "external": 6128396,
      "arrayBuffers": 2140180
    }
  }
}
2025-08-04T23:24:28.557Z [INFO] [API][PUT-pengembalian] Return service initialized
{
  "performance": {
    "label": "service-initialization",
    "duration": "0ms"
  }
}
2025-08-04T23:24:31.512Z [DEBUG] [API][PUT-pengembalian] Transaction code resolved to ID
{
  "requestId": "req-1754349867822-473bicvg5",
  "transactionCode": "TXN-20250805-001",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "performance": {
    "timestamp": 1754349871512,
    "memory": {
      "rss": 1205239808,
      "heapTotal": 218034176,
      "heapUsed": 211019736,
      "external": 6128467,
      "arrayBuffers": 2140251
    }
  }
}
2025-08-04T23:24:31.515Z [INFO] [API][PUT-pengembalian] Transaction lookup completed
{
  "performance": {
    "label": "transaction-lookup",
    "duration": "2955ms"
  }
}
2025-08-04T23:24:31.518Z [INFO] [API][PUT-pengembalian] Service initialization and transaction lookup completed
{
  "requestId": "req-1754349867822-473bicvg5",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "serviceInitDuration": 0,
  "transactionLookupDuration": 2955,
  "performance": {
    "timestamp": 1754349871518,
    "memory": {
      "rss": 1205239808,
      "heapTotal": 218034176,
      "heapUsed": 211034136,
      "external": 6128467,
      "arrayBuffers": 2140251
    }
  }
}
2025-08-04T23:24:31.531Z [INFO] [API][PUT-pengembalian] Starting return processing
{
  "requestId": "req-1754349867822-473bicvg5",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "itemCount": 1,
  "returnDate": "2025-08-04T10:00:00.000Z",
  "performance": {
    "timestamp": 1754349871531,
    "memory": {
      "rss": 1205239808,
      "heapTotal": 218034176,
      "heapUsed": 211042280,
      "external": 6128467,
      "arrayBuffers": 2140251
    }
  }
}
2025-08-04T23:24:31.545Z [INFO] [ReturnService][processReturn] Return processing started
{
  "processId": "process-1754349871544-2kn8nbnks",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "itemCount": 1,
  "hasReturnDate": true,
  "hasNotes": true,
  "performance": {
    "timestamp": 1754349871545,
    "memory": {
      "rss": 1205248000,
      "heapTotal": 218034176,
      "heapUsed": 211053696,
      "external": 6128467,
      "arrayBuffers": 2140251
    }
  }
}
2025-08-04T23:24:31.550Z [INFO] [ReturnService][processReturn] Audit start logging initiated
{
  "performance": {
    "label": "audit-start-logging",
    "duration": "0ms"
  }
}
2025-08-04T23:24:31.557Z [INFO] [ReturnService][processReturn] Starting parallel validation and preparation
{
  "processId": "process-1754349871544-2kn8nbnks",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "itemCount": 1,
  "performance": {
    "timestamp": 1754349871557,
    "memory": {
      "rss": 1205252096,
      "heapTotal": 218034176,
      "heapUsed": 211069536,
      "external": 6128467,
      "arrayBuffers": 2140251
    }
  }
}
2025-08-04T23:24:31.563Z [DEBUG] [ReturnService][calculateReturnPenalties] Penalty calculation started
{
  "calcId": "penalty-1754349871562-7y73l2zyb",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "itemCount": 1,
  "actualReturnDate": "2025-08-04T10:00:00.000Z",
  "performance": {
    "timestamp": 1754349871563,
    "memory": {
      "rss": 1205252096,
      "heapTotal": 218034176,
      "heapUsed": 211099488,
      "external": 6128467,
      "arrayBuffers": 2140251
    }
  }
}
2025-08-04T23:24:33.790Z [INFO] [ReturnService][calculateReturnPenalties] Transaction query for penalty calculation completed
{
  "performance": {
    "label": "transaction-query",
    "duration": "2225ms"
  }
}
2025-08-04T23:24:33.800Z [DEBUG] [ReturnService][calculateReturnPenalties] Transaction data retrieved
{
  "calcId": "penalty-1754349871562-7y73l2zyb",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "txQueryDuration": 2225,
  "transactionStatus": "active",
  "expectedReturnDate": "2025-08-10T00:00:00.000Z",
  "itemsCount": 1,
  "performance": {
    "timestamp": 1754349873800,
    "memory": {
      "rss": 1205932032,
      "heapTotal": 216985600,
      "heapUsed": 210663992,
      "external": 6123673,
      "arrayBuffers": 2135457
    }
  }
}
2025-08-04T23:24:33.820Z [INFO] [ReturnService][calculateReturnPenalties] Item preparation for penalty calculation completed
{
  "performance": {
    "label": "item-preparation",
    "duration": "1ms"
  }
}
2025-08-04T23:24:33.829Z [DEBUG] [ReturnService][calculateReturnPenalties] Items prepared for calculation
{
  "calcId": "penalty-1754349871562-7y73l2zyb",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "itemPrepDuration": 1,
  "itemsForCalculationCount": 1,
  "performance": {
    "timestamp": 1754349873829,
    "memory": {
      "rss": 1205940224,
      "heapTotal": 216985600,
      "heapUsed": 210680312,
      "external": 6123673,
      "arrayBuffers": 2135457
    }
  }
}
2025-08-04T23:24:33.841Z [INFO] [ReturnService][calculateReturnPenalties] Penalty calculator execution completed
{
  "performance": {
    "label": "penalty-calculator",
    "duration": "1ms"
  }
}
2025-08-04T23:24:33.846Z [INFO] [ReturnService][calculateReturnPenalties] Penalty calculation completed
{
  "calcId": "penalty-1754349871562-7y73l2zyb",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "calculationDuration": 1,
  "totalDuration": 2227,
  "totalPenalty": 0,
  "totalLateDays": 0,
  "itemPenaltiesCount": 1,
  "performanceBreakdown": {
    "transactionQuery": 2225,
    "itemPreparation": 1,
    "penaltyCalculation": 1
  },
  "performance": {
    "timestamp": 1754349873846,
    "memory": {
      "rss": 1205944320,
      "heapTotal": 216985600,
      "heapUsed": 210711032,
      "external": 6123673,
      "arrayBuffers": 2135457
    }
  }
}
2025-08-04T23:24:34.049Z [INFO] [ReturnService][processReturn] Parallel operations completed
{
  "performance": {
    "label": "parallel-operations",
    "duration": "2492ms"
  }
}
2025-08-04T23:24:34.084Z [INFO] [ReturnService][processReturn] Parallel validation and penalty calculation completed
{
  "processId": "process-1754349871544-2kn8nbnks",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "parallelDuration": 2492,
  "transactionStatus": "active",
  "itemsFound": 1,
  "totalPenalty": 0,
  "totalLateDays": 0,
  "performance": {
    "timestamp": 1754349874084,
    "memory": {
      "rss": 1205960704,
      "heapTotal": 216985600,
      "heapUsed": 210758704,
      "external": 6123730,
      "arrayBuffers": 2135514
    }
  }
}
2025-08-04T23:24:34.089Z [INFO] [ReturnService][processReturn] Audit calculation logging initiated
{
  "performance": {
    "label": "audit-calculation-logging",
    "duration": "0ms"
  }
}
2025-08-04T23:24:34.094Z [INFO] [ReturnService][processReturn] Audit penalty logging initiated
{
  "performance": {
    "label": "audit-penalty-logging",
    "duration": "0ms"
  }
}
2025-08-04T23:24:34.097Z [INFO] [ReturnService][processReturn] Audit processing logging initiated
{
  "performance": {
    "label": "audit-processing-logging",
    "duration": "0ms"
  }
}
2025-08-04T23:24:34.100Z [INFO] [ReturnService][processReturn] Starting database transaction
{
  "processId": "process-1754349871544-2kn8nbnks",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "totalPenalty": 0,
  "itemsToProcess": 1,
  "performance": {
    "timestamp": 1754349874100,
    "memory": {
      "rss": 1205960704,
      "heapTotal": 216985600,
      "heapUsed": 210789792,
      "external": 6123730,
      "arrayBuffers": 2135514
    }
  }
}
2025-08-04T23:24:34.377Z [DEBUG] [ReturnService][processReturn] Transaction started
{
  "processId": "process-1754349871544-2kn8nbnks",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "timestamp": "2025-08-04T23:24:34.377Z",
  "performance": {
    "timestamp": 1754349874377,
    "memory": {
      "rss": 1205985280,
      "heapTotal": 216985600,
      "heapUsed": 210991104,
      "external": 6123787,
      "arrayBuffers": 2135571
    }
  }
}
2025-08-04T23:24:34.662Z [INFO] [ReturnService][processReturn] Transaction status update completed
{
  "performance": {
    "label": "transaction-update",
    "duration": "282ms"
  }
}
2025-08-04T23:24:34.664Z [DEBUG] [ReturnService][processReturn] Transaction status updated
{
  "processId": "process-1754349871544-2kn8nbnks",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "newStatus": "dikembalikan",
  "returnDate": "2025-08-04T10:00:00.000Z",
  "penaltyAdded": 0,
  "txUpdateDuration": 282,
  "performance": {
    "timestamp": 1754349874664,
    "memory": {
      "rss": 1205989376,
      "heapTotal": 216985600,
      "heapUsed": 211085184,
      "external": 6123844,
      "arrayBuffers": 2135628
    }
  }
}
2025-08-04T23:24:34.666Z [INFO] [ReturnService][processReturn] Batch operations preparation completed
{
  "performance": {
    "label": "batch-preparation",
    "duration": "0ms"
  }
}
2025-08-04T23:24:34.669Z [DEBUG] [ReturnService][processReturn] Batch operations prepared
{
  "processId": "process-1754349871544-2kn8nbnks",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "transactionItemUpdatesCount": 1,
  "productStockUpdatesCount": 1,
  "batchPrepDuration": 0,
  "performance": {
    "timestamp": 1754349874668,
    "memory": {
      "rss": 1205989376,
      "heapTotal": 216985600,
      "heapUsed": 211120288,
      "external": 6123844,
      "arrayBuffers": 2135628
    }
  }
}
2025-08-04T23:24:35.226Z [INFO] [ReturnService][processReturn] All batch operations completed
{
  "performance": {
    "label": "batch-operations",
    "duration": "550ms"
  }
}
2025-08-04T23:24:35.228Z [DEBUG] [ReturnService][processReturn] All database updates completed
{
  "processId": "process-1754349871544-2kn8nbnks",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "batchUpdatesDuration": 550,
  "totalOperationsCount": 2,
  "transactionItemUpdatesCount": 1,
  "productStockUpdatesCount": 1,
  "performance": {
    "timestamp": 1754349875228,
    "memory": {
      "rss": 1206071296,
      "heapTotal": 216985600,
      "heapUsed": 211261096,
      "external": 6123901,
      "arrayBuffers": 2135685
    }
  }
}
2025-08-04T23:24:35.360Z [INFO] [ReturnService][processReturn] Database transaction completed
{
  "performance": {
    "label": "database-transaction",
    "duration": "1260ms"
  }
}
2025-08-04T23:24:35.365Z [INFO] [ReturnService][processReturn] Database transaction completed successfully
{
  "processId": "process-1754349871544-2kn8nbnks",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "dbTransactionDuration": 1260,
  "transactionInternalDuration": 1258,
  "totalPenalty": 0,
  "processedItemsCount": 1,
  "performance": {
    "timestamp": 1754349875364,
    "memory": {
      "rss": 1206083584,
      "heapTotal": 216985600,
      "heapUsed": 211309712,
      "external": 6123958,
      "arrayBuffers": 2135742
    }
  }
}
2025-08-04T23:24:35.367Z [INFO] [ReturnService][processReturn] Audit completion logging initiated
{
  "performance": {
    "label": "audit-completion-logging",
    "duration": "0ms"
  }
}
2025-08-04T23:24:35.373Z [INFO] [ReturnService][processReturn] Return processing completed successfully
{
  "performance": {
    "label": "total-process-process-1754349871544-2kn8nbnks",
    "duration": "3828ms"
  }
}
2025-08-04T23:24:35.376Z [INFO] [ReturnService][processReturn] Return processing completed successfully
{
  "processId": "process-1754349871544-2kn8nbnks",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "totalProcessDuration": 3828,
  "performanceBreakdown": {
    "auditStartLogging": 0,
    "parallelValidationAndPenaltyCalculation": 2492,
    "auditCalculationLogging": 0,
    "auditPenaltyLogging": 0,
    "auditProcessingLogging": 0,
    "databaseTransaction": 1260,
    "auditCompletionLogging": 0
  },
  "businessMetrics": {
    "totalPenalty": 0,
    "totalLateDays": 0,
    "processedItemsCount": 1,
    "success": true
  },
  "performance": {
    "timestamp": 1754349875376,
    "memory": {
      "rss": 1206091776,
      "heapTotal": 216985600,
      "heapUsed": 211337984,
      "external": 6123958,
      "arrayBuffers": 2135742
    }
  }
}
2025-08-04T23:24:35.380Z [INFO] [API][PUT-pengembalian] Return processing completed
{
  "performance": {
    "label": "return-processing",
    "duration": "3850ms"
  }
}
2025-08-04T23:24:35.385Z [INFO] [API][PUT-pengembalian] Return processing completed successfully
{
  "requestId": "req-1754349867822-473bicvg5",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "totalPenalty": 0,
  "processedItemsCount": 1,
  "returnProcessingDuration": 3850,
  "performance": {
    "timestamp": 1754349875384,
    "memory": {
      "rss": 1206091776,
      "heapTotal": 216985600,
      "heapUsed": 211366976,
      "external": 6123958,
      "arrayBuffers": 2135742
    }
  }
}
2025-08-04T23:24:35.389Z [INFO] [API][PUT-pengembalian] Response assembly completed
{
  "performance": {
    "label": "response-assembly",
    "duration": "0ms"
  }
}
2025-08-04T23:24:35.391Z [INFO] [API][PUT-pengembalian] API request completed successfully
{
  "performance": {
    "label": "total-api-request",
    "duration": "7569ms"
  }
}
2025-08-04T23:24:35.394Z [INFO] [API][PUT-pengembalian] API request completed successfully
{
  "requestId": "req-1754349867822-473bicvg5",
  "transaksiId": "9a26bba7-6749-4f43-ae62-bde65e64c55a",
  "totalApiDuration": 7569,
  "performanceBreakdown": {
    "rateLimitCheck": 0,
    "authentication": 707,
    "parameterProcessing": 0,
    "urlParsing": 0,
    "parameterValidation": 0,
    "bodyParsing": 0,
    "bodyValidation": 0,
    "serviceInitialization": 0,
    "transactionLookup": 2955,
    "returnProcessing": 3850,
    "responseAssembly": 0
  },
  "responsePayloadSize": 477,
  "success": true,
  "performance": {
    "timestamp": 1754349875393,
    "memory": {
      "rss": 1206091776,
      "heapTotal": 216985600,
      "heapUsed": 211400200,
      "external": 6123958,
      "arrayBuffers": 2135742
    }
  }
}
