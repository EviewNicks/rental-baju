2025-08-05T02:19:20.840Z [INFO] [API][PUT-pengembalian] API request started
{
  "requestId": "req-1754360360840-cvq3jhdld",
  "timestamp": "2025-08-05T02:19:20.840Z",
  "userAgent": "PostmanRuntime/7.45.0",
  "contentLength": "264",
  "performance": {
    "timestamp": 1754360360840,
    "memory": {
      "rss": 1124057088,
      "heapTotal": 176394240,
      "heapUsed": 169930304,
      "external": 4319110,
      "arrayBuffers": 334665
    }
  }
}
2025-08-05T02:19:27.219Z [INFO] [API][PUT-pengembalian] API request completed successfully
{
  "performance": {
    "label": "total-api-request",
    "duration": "6379ms"
  }
}

== Prosess Return - Success 200 ok  Note = Error : Incorrect header check ==



2025-08-05T02:46:05.384Z [INFO] [API][PUT-pengembalian] API request started
{
  "requestId": "req-1754361965384-nljxxj3k7",
  "timestamp": "2025-08-05T02:46:05.384Z",
  "userAgent": "PostmanRuntime/7.45.0",
  "contentLength": "255",
  "performance": {
    "timestamp": 1754361965384,
    "memory": {
      "rss": 1053089792,
      "heapTotal": 161988608,
      "heapUsed": 151968552,
      "external": 4245322,
      "arrayBuffers": 256526
    }
  }
}
2025-08-05T02:46:05.979Z [INFO] [API][PUT-pengembalian] Scheduled return detected
{
  "requestId": "req-1754361965384-nljxxj3k7",
  "returnDate": "2025-08-09T10:00:00.000Z",
  "daysAhead": 5,
  "performance": {
    "timestamp": 1754361965979,
    "memory": {
      "rss": 1053294592,
      "heapTotal": 161988608,
      "heapUsed": 153055224,
      "external": 4272057,
      "arrayBuffers": 277798
    }
  }
}
2025-08-05T02:46:12.974Z [INFO] [API][PUT-pengembalian] API request completed successfully
{
  "performance": {
    "label": "total-api-request",
    "duration": "7590ms"
  }
}

== Prosess Return - Late return with Penalty  200 ok  Note = Error : Incorrect header check ==



2025-08-05T02:50:01.389Z [INFO] [API][PUT-pengembalian] API request started
{
  "requestId": "req-1754362201389-lk0l6g732",
  "timestamp": "2025-08-05T02:50:01.389Z",
  "userAgent": "PostmanRuntime/7.45.0",
  "contentLength": "220",
  "performance": {
    "timestamp": 1754362201389,
    "memory": {
      "rss": 1118449664,
      "heapTotal": 184020992,
      "heapUsed": 176191824,
      "external": 7203940,
      "arrayBuffers": 3215884
    }
  }
}
2025-08-05T02:50:07.783Z [INFO] [API][PUT-pengembalian] API request completed successfully
{
  "performance": {
    "label": "total-api-request",
    "duration": "6394ms"
  }
}


== Prosess Return - damagedItems  200 ok  Note = Error : Incorrect header check ==


2025-08-05T08:33:29.060Z [INFO] [API][PUT-pengembalian] API request started
{
  "requestId": "req-1754382809060-w13uvilvy",
  "timestamp": "2025-08-05T08:33:29.060Z",
  "userAgent": "PostmanRuntime/7.45.0",
  "contentLength": "220",
  "performance": {
    "timestamp": 1754382809060,
    "memory": {
      "rss": 1074262016,
      "heapTotal": 159444992,
      "heapUsed": 154669768,
      "external": 7408273,
      "arrayBuffers": 3407826
    }
  }
}
2025-08-05T08:33:37.277Z [INFO] [API][PUT-pengembalian] API request completed successfully
{
  "performance": {
    "label": "total-api-request",
    "duration": "8217ms"
  }
}

== Prosess Return - Lost Item with modal awal 200 ok  Note = Error : Incorrect header check ==


2025-08-05T08:36:19.120Z [INFO] [API][PUT-pengembalian] API request started
{
  "requestId": "req-1754382979120-e2wuufe8f",
  "timestamp": "2025-08-05T08:36:19.120Z",
  "userAgent": "PostmanRuntime/7.45.0",
  "contentLength": "264",
  "performance": {
    "timestamp": 1754382979120,
    "memory": {
      "rss": 1134354432,
      "heapTotal": 180379648,
      "heapUsed": 173872960,
      "external": 4313349,
      "arrayBuffers": 315102
    }
  }
}
2025-08-05T08:36:20.121Z [INFO] [API][PUT-pengembalian] Late return detected
{
  "requestId": "req-1754382979120-e2wuufe8f",
  "returnDate": "2025-08-04T10:00:00.000Z",
  "daysLate": 1,
  "performance": {
    "timestamp": 1754382980121,
    "memory": {
      "rss": 1133604864,
      "heapTotal": 180379648,
      "heapUsed": 173987352,
      "external": 4327183,
      "arrayBuffers": 335583
    }
  }
}
2025-08-05T08:36:26.254Z [INFO] [API][PUT-pengembalian] API request completed successfully
{
  "performance": {
    "label": "total-api-request",
    "duration": "7134ms"
  }
}

== Prosess Return - Success 200 ok  Note = Error : Incorrect header check ==


2025-08-05T09:07:17.117Z [INFO] [API][PUT-pengembalian] API request started
{
  "requestId": "req-1754384837116-ee84v4gpb",
  "timestamp": "2025-08-05T09:07:17.116Z",
  "userAgent": "PostmanRuntime/7.45.0",
  "contentLength": "165",
  "performance": {
    "timestamp": 1754384837116,
    "memory": {
      "rss": 1139724288,
      "heapTotal": 183263232,
      "heapUsed": 175279768,
      "external": 6309123,
      "arrayBuffers": 2310476
    }
  }
}
2025-08-05T09:07:17.728Z [ERROR] [API][PUT-pengembalian] Validation failed
{
  "requestId": "req-1754384837116-ee84v4gpb",
  "transactionCode": "TXN-20990101-999",
  "validationErrors": [
    {
      "field": "items.0.itemId",
      "message": "ID item transaksi tidak valid",
      "code": "invalid_format"
    }
  ],
  "requestBody": {
    "items": [
      {
        "itemId": "00000000-0000-0000-0000-000000000001",
        "kondisiAkhir": "Baik - tidak ada kerusakan",
        "jumlahKembali": 1
      }
    ]
  },
  "performance": {
    "timestamp": 1754384837728,
    "memory": {
      "rss": 1139744768,
      "heapTotal": 183263232,
      "heapUsed": 175279496,
      "external": 6322502,
      "arrayBuffers": 2330902
    }
  }
}
2025-08-05T09:07:17.732Z [INFO] [API][PUT-pengembalian] API request failed
{
  "performance": {
    "label": "total-api-request",
    "duration": "616ms"
  }
}
2025-08-05T09:07:17.736Z [ERROR] [API][PUT-pengembalian] API request failed
{
  "requestId": "req-1754384837116-ee84v4gpb",
  "transactionCode": "TXN-20990101-999",
  "totalApiDuration": 616,
  "error": {
    "name": "ZodError",
    "message": "[\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/\",\n    \"path\": [\n      \"items\",\n      0,\n      \"itemId\"\n    ],\n    \"message\": \"ID item transaksi tidak valid\"\n  }\n]",
    "stack": "ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/\",\n    \"path\": [\n      \"items\",\n      0,\n      \"itemId\"\n    ],\n    \"message\": \"ID item transaksi tidak valid\"\n  }\n]\n    at PUT (D:\\.work\\rental-software\\.next\\server\\chunks\\[root-of-the-server]__1bb4b15e._.js:3589:46)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AppRouteRouteModule.do (D:\\.work\\rental-software\\node_modules\\next\\dist\\compiled\\next-server\\app-route-turbo.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (D:\\.work\\rental-software\\node_modules\\next\\dist\\compiled\\next-server\\app-route-turbo.runtime.dev.js:5:45984)\n    at async responseGenerator (D:\\.work\\rental-software\\.next\\server\\chunks\\node_modules_next_86b4de74._.js:13538:38)\n    at async AppRouteRouteModule.handleResponse (D:\\.work\\rental-software\\node_modules\\next\\dist\\compiled\\next-server\\app-route-turbo.runtime.dev.js:1:183770)\n    at async handleResponse (D:\\.work\\rental-software\\.next\\server\\chunks\\node_modules_next_86b4de74._.js:13600:32)\n    at async handler (D:\\.work\\rental-software\\.next\\server\\chunks\\node_modules_next_86b4de74._.js:13652:13)\n    at async doRender (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\base-server.js:1587:34)\n    at async DevServer.renderToResponseWithComponentsImpl (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\base-server.js:1929:13)\n    at async DevServer.renderPageComponent (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\base-server.js:2395:24)\n    at async DevServer.renderToResponseImpl (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\base-server.js:2435:32)\n    at async DevServer.pipeImpl (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\base-server.js:1035:25)\n    at async NextNodeServer.handleCatchallRenderRequest (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\next-server.js:393:17)\n    at async DevServer.handleRequestImpl (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\base-server.js:925:17)\n    at async D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\dev\\next-dev-server.js:398:20\n    at async Span.traceAsyncFn (D:\\.work\\rental-software\\node_modules\\next\\dist\\trace\\trace.js:157:20)\n    at async DevServer.handleRequest (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\dev\\next-dev-server.js:394:24)\n    at async invokeRender (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\lib\\router-server.js:239:21)\n    at async handleRequest (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\lib\\router-server.js:436:24)\n    at async requestHandlerImpl (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\lib\\router-server.js:464:13)\n    at async Server.requestListener (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\lib\\start-server.js:218:13)"
  },
  "timestamp": "2025-08-05T09:07:17.736Z",
  "performance": {
    "timestamp": 1754384837736,
    "memory": {
      "rss": 1139773440,
      "heapTotal": 183263232,
      "heapUsed": 175453648,
      "external": 6322502,
      "arrayBuffers": 2330902
    }
  }
}

=== Hasil ==
{
    "success": false,
    "error": {
        "message": "Data pengembalian tidak valid",
        "code": "VALIDATION_ERROR",
        "details": [
            {
                "field": "items.0.itemId",
                "message": "ID item transaksi tidak valid",
                "code": "invalid_format",
                "suggestions": []
            }
        ],
        "hints": []
    }
}

== Prosess Return - transaction not found 400 Bad Request  ok   ==


2025-08-05T09:08:38.657Z [INFO] [API][PUT-pengembalian] API request started
{
  "requestId": "req-1754384918657-p3zeww8ac",
  "timestamp": "2025-08-05T09:08:38.657Z",
  "userAgent": "PostmanRuntime/7.45.0",
  "contentLength": "117",
  "performance": {
    "timestamp": 1754384918657,
    "memory": {
      "rss": 1151119360,
      "heapTotal": 203227136,
      "heapUsed": 193111824,
      "external": 5937915,
      "arrayBuffers": 1953460
    }
  }
}
2025-08-05T09:08:39.278Z [ERROR] [API][PUT-pengembalian] Validation failed
{
  "requestId": "req-1754384918657-p3zeww8ac",
  "transactionCode": "TXN-20250805-007",
  "validationErrors": [
    {
      "field": "items.0.itemId",
      "message": "ID item transaksi tidak valid",
      "code": "invalid_format"
    },
    {
      "field": "items.0.kondisiAkhir",
      "message": "Kondisi akhir minimal 5 karakter",
      "code": "too_small"
    },
    {
      "field": "items.0.jumlahKembali",
      "message": "Jumlah kembali tidak boleh negatif",
      "code": "too_small"
    },
    {
      "field": "items.0.jumlahKembali",
      "message": "Jumlah kembali tidak sesuai dengan kondisi barang. Barang hilang harus 0, barang normal minimal 1",
      "code": "custom"
    }
  ],
  "requestBody": {
    "items": [
      {
        "itemId": "invalid-uuid",
        "kondisiAkhir": "A",
        "jumlahKembali": -1
      }
    ]
  },
  "performance": {
    "timestamp": 1754384919278,
    "memory": {
      "rss": 1152348160,
      "heapTotal": 195887104,
      "heapUsed": 190732040,
      "external": 5899809,
      "arrayBuffers": 1911593
    }
  }
}
2025-08-05T09:08:39.284Z [INFO] [API][PUT-pengembalian] API request failed
{
  "performance": {
    "label": "total-api-request",
    "duration": "626ms"
  }
}
2025-08-05T09:08:39.287Z [ERROR] [API][PUT-pengembalian] API request failed
{
  "requestId": "req-1754384918657-p3zeww8ac",
  "transactionCode": "TXN-20250805-007",
  "totalApiDuration": 626,
  "error": {
    "name": "ZodError",
    "message": "[\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/\",\n    \"path\": [\n      \"items\",\n      0,\n      \"itemId\"\n    ],\n    \"message\": \"ID item transaksi tidak valid\"\n  },\n  {\n    \"origin\": \"string\",\n    \"code\": \"too_small\",\n    \"minimum\": 5,\n    \"inclusive\": true,\n    \"path\": [\n      \"items\",\n      0,\n      \"kondisiAkhir\"\n    ],\n    \"message\": \"Kondisi akhir minimal 5 karakter\"\n  },\n  {\n    \"origin\": \"number\",\n    \"code\": \"too_small\",\n    \"minimum\": 0,\n    \"inclusive\": true,\n    \"path\": [\n      \"items\",\n      0,\n      \"jumlahKembali\"\n    ],\n    \"message\": \"Jumlah kembali tidak boleh negatif\"\n  },\n  {\n    \"code\": \"custom\",\n    \"path\": [\n      \"items\",\n      0,\n      \"jumlahKembali\"\n    ],\n    \"message\": \"Jumlah kembali tidak sesuai dengan kondisi barang. Barang hilang harus 0, barang normal minimal 1\"\n  }\n]",
    "stack": "ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/\",\n    \"path\": [\n      \"items\",\n      0,\n      \"itemId\"\n    ],\n    \"message\": \"ID item transaksi tidak valid\"\n  },\n  {\n    \"origin\": \"string\",\n    \"code\": \"too_small\",\n    \"minimum\": 5,\n    \"inclusive\": true,\n    \"path\": [\n      \"items\",\n      0,\n      \"kondisiAkhir\"\n    ],\n    \"message\": \"Kondisi akhir minimal 5 karakter\"\n  },\n  {\n    \"origin\": \"number\",\n    \"code\": \"too_small\",\n    \"minimum\": 0,\n    \"inclusive\": true,\n    \"path\": [\n      \"items\",\n      0,\n      \"jumlahKembali\"\n    ],\n    \"message\": \"Jumlah kembali tidak boleh negatif\"\n  },\n  {\n    \"code\": \"custom\",\n    \"path\": [\n      \"items\",\n      0,\n      \"jumlahKembali\"\n    ],\n    \"message\": \"Jumlah kembali tidak sesuai dengan kondisi barang. Barang hilang harus 0, barang normal minimal 1\"\n  }\n]\n    at PUT (D:\\.work\\rental-software\\.next\\server\\chunks\\[root-of-the-server]__1bb4b15e._.js:3589:46)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AppRouteRouteModule.do (D:\\.work\\rental-software\\node_modules\\next\\dist\\compiled\\next-server\\app-route-turbo.runtime.dev.js:5:38782)\n    at async AppRouteRouteModule.handle (D:\\.work\\rental-software\\node_modules\\next\\dist\\compiled\\next-server\\app-route-turbo.runtime.dev.js:5:45984)\n    at async responseGenerator (D:\\.work\\rental-software\\.next\\server\\chunks\\node_modules_next_86b4de74._.js:13538:38)\n    at async AppRouteRouteModule.handleResponse (D:\\.work\\rental-software\\node_modules\\next\\dist\\compiled\\next-server\\app-route-turbo.runtime.dev.js:1:183770)\n    at async handleResponse (D:\\.work\\rental-software\\.next\\server\\chunks\\node_modules_next_86b4de74._.js:13600:32)\n    at async handler (D:\\.work\\rental-software\\.next\\server\\chunks\\node_modules_next_86b4de74._.js:13652:13)\n    at async doRender (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\base-server.js:1587:34)\n    at async DevServer.renderToResponseWithComponentsImpl (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\base-server.js:1929:13)\n    at async DevServer.renderPageComponent (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\base-server.js:2395:24)\n    at async DevServer.renderToResponseImpl (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\base-server.js:2435:32)\n    at async DevServer.pipeImpl (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\base-server.js:1035:25)\n    at async NextNodeServer.handleCatchallRenderRequest (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\next-server.js:393:17)\n    at async DevServer.handleRequestImpl (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\base-server.js:925:17)\n    at async D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\dev\\next-dev-server.js:398:20\n    at async Span.traceAsyncFn (D:\\.work\\rental-software\\node_modules\\next\\dist\\trace\\trace.js:157:20)\n    at async DevServer.handleRequest (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\dev\\next-dev-server.js:394:24)\n    at async invokeRender (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\lib\\router-server.js:239:21)\n    at async handleRequest (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\lib\\router-server.js:436:24)\n    at async requestHandlerImpl (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\lib\\router-server.js:464:13)\n    at async Server.requestListener (D:\\.work\\rental-software\\node_modules\\next\\dist\\server\\lib\\start-server.js:218:13)"
  },
  "timestamp": "2025-08-05T09:08:39.286Z",
  "performance": {
    "timestamp": 1754384919287,
    "memory": {
      "rss": 1152360448,
      "heapTotal": 195887104,
      "heapUsed": 190775352,
      "external": 5899809,
      "arrayBuffers": 1911593
    }
  }
}

=== Hasil ===
{
    "success": false,
    "error": {
        "message": "Validasi barang hilang gagal. Periksa kondisi dan jumlah kembali.",
        "code": "LOST_ITEM_VALIDATION_ERROR",
        "details": [
            {
                "field": "items.0.itemId",
                "message": "ID item transaksi tidak valid",
                "code": "invalid_format",
                "suggestions": []
            },
            {
                "field": "items.0.kondisiAkhir",
                "message": "Kondisi akhir minimal 5 karakter",
                "code": "too_small",
                "suggestions": []
            },
            {
                "field": "items.0.jumlahKembali",
                "message": "Jumlah kembali tidak boleh negatif",
                "code": "too_small",
                "suggestions": []
            },
            {
                "field": "items.0.jumlahKembali",
                "message": "Jumlah kembali tidak sesuai dengan kondisi barang. Barang hilang harus 0, barang normal minimal 1. Kondisi: \"A\" → Jumlah kembali minimal 1",
                "code": "custom",
                "suggestions": [
                    "Untuk barang hilang/tidak dapat dikembalikan, ubah kondisi dan set jumlah = 0",
                    "Untuk barang normal yang dikembalikan, jumlah minimal 1",
                    "Periksa kembali kondisi dan jumlah barang yang dikembalikan"
                ]
            }
        ],
        "hints": [
            "Barang hilang: set jumlahKembali = 0 dan kondisiAkhir mengandung \"Hilang\" atau \"tidak dikembalikan\"",
            "Barang normal: set jumlahKembali ≥ 1 dan kondisiAkhir sesuai keadaan barang"
        ]
    }
}


== Prosess Return - Validation Error 400 Bad Request  ok  ==

2025-08-05T09:09:39.545Z [INFO] [API][PUT-pengembalian] API request started
{
  "requestId": "req-1754384979544-v4crsrel2",
  "timestamp": "2025-08-05T09:09:39.545Z",
  "userAgent": "PostmanRuntime/7.45.0",
  "contentLength": "165",
  "performance": {
    "timestamp": 1754384979545,
    "memory": {
      "rss": 1162911744,
      "heapTotal": 215023616,
      "heapUsed": 190905192,
      "external": 4380198,
      "arrayBuffers": 395724
    }
  }
}

=== hasil ===

{
    "success": false,
    "error": {
        "message": "Parameter harus berupa kode transaksi (contoh: TXN-20250726-001) atau ID transaksi",
        "code": "VALIDATION_ERROR"
    }
}


== Prosess Return - Not Eligible 400 Bad Request  ok   ==